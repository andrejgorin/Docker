# Configuration for telegraf agent
[agent]
  interval = "20s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "10s"
  flush_jitter = "0s"
  precision = ""
  hostname = ""
  [[outputs.influxdb_v2]]
    namepass = ["docker*"]
    urls = ["http://influxdb:8086"]
    token = "token"
    organization = "home"
    bucket = "docker"
  [[outputs.influxdb_v2]]
    namepass = ["mqtt_consumer"]
    urls = ["http://influxdb:8086"]
    token = "token"
    organization = "home"
    bucket = "mqtt"
  [[outputs.influxdb_v2]]
    namepass = ["cpu", "disk", "diskio", "mem", "net", "processes", "swap", "system"]
    urls = ["http://influxdb:8086"]
    token = "token"
    organization = "home"
    bucket = "system"
  [[inputs.mqtt_consumer]]
    servers = ["mqtt://mosquitto:1883"]
    topics = ["esp32/pub"]
    topic_tag = ""
    client_id = "esp32"
    username = "publisher5"
    password = "passw"
    data_format = "json_v2"
      [[inputs.mqtt_consumer.json_v2]]
        [[inputs.mqtt_consumer.json_v2.field]]
        path = "humidity"
        type = "float" 
        [[inputs.mqtt_consumer.json_v2.field]]
        path = "temperature"
        type = "float"
        [[inputs.mqtt_consumer.json_v2.object]]
        path = "@this"
        tags = ["did"]
  [[inputs.docker]]
    endpoint = "unix:///var/run/docker.sock" 
    container_names = [] 
    timeout = "5s" 
    total = false
  [[inputs.cpu]]
    percpu = true
    totalcpu = true
    collect_cpu_time = false
    report_active = false
  [[inputs.disk]]
    ignore_fs = ["tmpfs", "devtmpfs", "devfs", "iso9660", "overlay", "aufs", "squashfs"]
  [[inputs.diskio]]
    # no configuration
  [[inputs.mem]]
    # no configuration
  [[inputs.net]]
    # no configuration
  [[inputs.processes]]
    # no configuration
  [[inputs.swap]]
    # no configuration
  [[inputs.system]]
    # no configuration

